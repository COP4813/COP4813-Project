<!doctype html>

<html>
    <head>
	    <title>Admin Page</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body {
            padding: 20px;
            }
            .container-flex {
            display: flex;
            gap: 20px;
            }
            .user-list, .task-list {
            border: 1px solid #ccc;
            padding: 10px;
            width: 45%;
            min-height: 300px;
            }
            .user-item {
            cursor: pointer;
            }
            .user-item:hover {
            background-color: #f0f0f0;
            }
            .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
            }
            .trash-icon {
            color: red;
            cursor: pointer;
            }
        </style>

    </head>

    <body>
        <h1>Welcome To The Admin Page!</h1>
        <p>Manage User Data Below:</p>
        

        <div class="container-flex">
            <div class="user-list">
                <h4>Users</h4>
                <ul id="userList" class="list-group">
                    <!-- display users here -->
                    <li class="list-group-item user-item">User Name</li>
                </ul>
            </div>

            <div class="task-list">
                <h4>Tasks</h4>
                <ul id="taskList" class="list-group">
                    <!-- display users tasks here -->
                    <li class="list-group-item task-item">
                        <span>Task Name</span>
                        <span class="trash-icon">ðŸ—‘</span>
                    </li>
                </ul>
            </div>
        </div>

        <script>
            function getUsers(userId) {
                //query users to populate userList
            }
    
             function getTasks(userId) {
                //query tasks to populate taskList for that user
            }

            //delete task for user if click trash-can
            function deleteTask(taskId) {
                //delete task for user if click trash-can
            }

            async function getUsers() {
                try {
                const response = await fetch('/users');
                if (!response.ok) {
                    throw new Error('Failed to fetch users');
                }
                const users = await response.json();
                const userList = document.getElementById('userList');
                userList.innerHTML = ''; // clear existing list

                users.forEach(user => {
                    const li = document.createElement('li');
                    li.classList.add('list-group-item', 'user-item');
                    li.textContent = user.username || user.email; // show username or fallback to email
                    userList.appendChild(li);
                });
                } catch (error) {
                console.error(error);
                alert('Error loading users');
                }
            }

            // Call getUsers when the page loads
            window.onload = () => {
                getUsers();
            };
        </script>


    </body> 

</html>